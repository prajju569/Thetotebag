<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Join the Waitlist â€” The Tote Bag Company</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rye&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & ROOT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --cream:      #F2EDE0;
  --cream-dark: #E8E0CE;
  --brown:      #3D1F0D;
  --brown-mid:  #7B3F1A;
  --gold:       #C9973A;
  --teal:       #4A7C8E;
  --olive:      #5A6B3A;
  --terracotta: #C46A3C;
}
html, body { height: 100%; }
body {
  background: var(--cream);
  color: var(--brown);
  font-family: 'Lora', Georgia, serif;
  overflow-x: hidden;
  cursor: none;
  min-height: 100vh;
}

/* Fabric weave */
body::before {
  content: '';
  position: fixed; inset: 0;
  pointer-events: none; z-index: 0;
  background-image:
    repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(61,31,13,0.025) 2px, rgba(61,31,13,0.025) 4px),
    repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(61,31,13,0.025) 2px, rgba(61,31,13,0.025) 4px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CURSOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cursor-needle {
  position: fixed; width: 4px; height: 26px;
  background: linear-gradient(to bottom, var(--gold), var(--brown-mid));
  border-radius: 2px 2px 50% 50%;
  pointer-events: none; z-index: 9999;
  transform-origin: top center;
  transform: translate(-2px, 0) rotate(30deg);
  box-shadow: 0 2px 8px rgba(61,31,13,0.3);
}
.cursor-needle::after {
  content: '';
  position: absolute; top: 3px; left: 50%;
  transform: translateX(-50%);
  width: 2.5px; height: 4px;
  background: var(--cream); border-radius: 50%;
}
.cursor-thread {
  position: fixed; width: 28px; height: 28px;
  border: 2px dashed var(--terracotta);
  border-radius: 50%;
  pointer-events: none; z-index: 9998;
  opacity: 0.55;
  transition: width .3s, height .3s, opacity .3s, border-color .3s;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 300;
  padding: 18px 48px;
  display: flex; justify-content: space-between; align-items: center;
  background: rgba(242,237,224,0.9);
  backdrop-filter: blur(10px);
  border-bottom: 2.5px dashed rgba(61,31,13,0.22);
}
.nav-logo {
  font-family: 'Rye', serif; font-size: 15px;
  color: var(--brown); text-decoration: none;
  letter-spacing: 1px; line-height: 1.3;
}
.nav-back {
  font-family: 'Lora', serif; font-size: 13px;
  color: var(--brown-mid); text-decoration: none;
  letter-spacing: 0.5px; display: flex;
  align-items: center; gap: 8px;
  border-bottom: 1.5px dashed transparent;
  padding-bottom: 2px;
  transition: color .3s, border-color .3s;
}
.nav-back:hover { color: var(--terracotta); border-color: var(--terracotta); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
main {
  position: relative; z-index: 1;
  padding: 110px 0 80px;
  min-height: 100vh;
  display: flex; flex-direction: column; align-items: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COUNTER HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.counter-hero {
  text-align: center; padding: 48px 24px 40px;
  position: relative; width: 100%; max-width: 900px;
}
.counter-eyebrow {
  font-family: 'Lora', serif; font-size: 11px;
  letter-spacing: 4px; text-transform: uppercase;
  color: var(--brown-mid); opacity: 0.6;
  margin-bottom: 20px; display: flex;
  align-items: center; justify-content: center; gap: 14px;
}
.counter-eyebrow::before, .counter-eyebrow::after {
  content: '';
  width: 60px; height: 1.5px;
  background: repeating-linear-gradient(90deg, var(--gold) 0, var(--gold) 5px, transparent 5px, transparent 9px);
}
.counter-patch {
  display: inline-flex; flex-direction: column;
  align-items: center; justify-content: center;
  background: var(--brown);
  border: 4px solid var(--brown);
  outline: 3px dashed rgba(242,237,224,0.25); outline-offset: 5px;
  padding: 32px 60px; margin-bottom: 28px;
  position: relative;
}
.counter-patch::before {
  content: 'â˜… WAITLIST â˜…';
  position: absolute; top: -13px; left: 50%;
  transform: translateX(-50%);
  font-family: 'Rye', serif; font-size: 10px;
  letter-spacing: 3px; color: var(--brown);
  background: var(--gold);
  padding: 4px 16px; border: 2px solid var(--brown);
  white-space: nowrap;
}
.counter-num {
  font-family: 'Rye', serif;
  font-size: clamp(56px, 10vw, 96px);
  color: var(--cream); line-height: 1;
  letter-spacing: -2px;
  transition: transform 0.3s cubic-bezier(0.23,1,0.32,1);
}
.counter-num.bump { animation: numBump 0.4s cubic-bezier(0.23,1,0.32,1); }
@keyframes numBump {
  0%  { transform: scale(1); }
  40% { transform: scale(1.15) rotate(-1deg); color: var(--gold); }
  100%{ transform: scale(1); }
}
.counter-sub {
  font-family: 'Lora', serif; font-size: 11px;
  letter-spacing: 3px; text-transform: uppercase;
  color: rgba(242,237,224,0.5); margin-top: 6px;
}

.counter-hero h1 {
  font-family: 'Rye', serif;
  font-size: clamp(28px, 5vw, 52px);
  color: var(--brown); line-height: 1.2;
  letter-spacing: 1.5px; margin-bottom: 12px;
}
.counter-hero p {
  font-family: 'Lora', serif; font-size: 15px;
  font-style: italic; color: var(--brown-mid);
  line-height: 1.9; max-width: 480px; margin: 0 auto;
}

/* Stitch divider */
.stitch-divider {
  width: 100%; max-width: 700px;
  height: 2px; margin: 0 auto 48px;
  background: repeating-linear-gradient(90deg, var(--gold) 0, var(--gold) 8px, transparent 8px, transparent 16px);
  opacity: 0.4;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORM CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.form-wrap {
  width: 100%; max-width: 620px;
  padding: 0 24px;
}
.form-card {
  background: var(--cream);
  border: 3px solid var(--brown);
  outline: 3px dashed rgba(61,31,13,0.22); outline-offset: 6px;
  padding: 52px 48px;
  box-shadow: 7px 9px 0 rgba(61,31,13,0.14);
  position: relative;
}
.form-card-badge {
  position: absolute; top: -14px; left: 32px;
  font-family: 'Rye', serif; font-size: 10px;
  letter-spacing: 2px; color: var(--cream);
  background: var(--terracotta);
  padding: 5px 18px; border: 2.5px solid var(--brown);
}
.form-title {
  font-family: 'Rye', serif; font-size: 22px;
  color: var(--brown); letter-spacing: 1px;
  margin-bottom: 6px;
}
.form-subtitle {
  font-family: 'Lora', serif; font-size: 13px;
  font-style: italic; color: var(--brown-mid);
  margin-bottom: 36px; line-height: 1.7;
}
.form-fields { display: flex; flex-direction: column; gap: 22px; }
.field-group { display: flex; flex-direction: column; gap: 7px; }
.field-group label {
  font-family: 'Rye', serif; font-size: 11px;
  letter-spacing: 1.5px; color: var(--brown);
  text-transform: uppercase;
}
.field-group input {
  border: 2.5px solid var(--brown);
  outline: 1.5px dashed rgba(61,31,13,0.18); outline-offset: 3px;
  background: var(--cream-dark);
  padding: 13px 18px;
  font-family: 'Lora', serif; font-size: 15px;
  font-style: italic; color: var(--brown);
  transition: outline-color .2s, background .2s, border-color .2s;
  width: 100%;
}
.field-group input:focus {
  outline-color: var(--gold);
  background: #fff; border-color: var(--brown-mid);
}
.field-group input::placeholder { color: rgba(61,31,13,0.3); }
.field-group .field-hint {
  font-size: 11px; font-style: italic;
  color: var(--brown-mid); opacity: 0.6;
  margin-top: 2px;
}

/* Submit button */
.submit-btn {
  width: 100%;
  font-family: 'Rye', serif; font-size: 15px;
  letter-spacing: 2px; color: var(--cream);
  background: var(--brown);
  border: 3px solid var(--brown);
  outline: 2.5px dashed rgba(242,237,224,0.3); outline-offset: 4px;
  padding: 18px 32px; cursor: none;
  margin-top: 8px;
  transition: background .25s, transform .2s;
  display: flex; align-items: center; justify-content: center; gap: 12px;
  position: relative; overflow: hidden;
}
.submit-btn:hover {
  background: var(--terracotta);
  transform: translateY(-2px);
}
.submit-btn .btn-needle {
  font-size: 20px;
  transition: transform .3s;
  display: inline-block;
}
.submit-btn:hover .btn-needle { transform: rotate(45deg) scale(1.2); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIVE SPOTS TICKER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.spots-ticker {
  margin-top: 20px; text-align: center;
  font-family: 'Lora', serif; font-size: 12px;
  font-style: italic; color: var(--brown-mid);
  opacity: 0.7;
}
.spots-ticker strong {
  color: var(--terracotta); font-style: normal;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PERKS STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.perks-strip {
  display: flex; gap: 20px; flex-wrap: wrap;
  justify-content: center;
  margin-top: 52px; padding: 0 24px;
  max-width: 720px; width: 100%;
}
.perk {
  flex: 1; min-width: 140px;
  background: var(--cream-dark);
  border: 2.5px solid var(--brown);
  outline: 2px dashed rgba(61,31,13,0.2); outline-offset: 4px;
  padding: 20px 16px; text-align: center;
  transition: transform .3s, box-shadow .3s;
}
.perk:hover { transform: translateY(-4px) rotate(-0.5deg); box-shadow: 4px 6px 0 var(--brown); }
.perk-icon { font-size: 26px; margin-bottom: 8px; display: block; }
.perk-text {
  font-family: 'Lora', serif; font-size: 12px;
  font-style: italic; color: var(--brown-mid); line-height: 1.6;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   âœ‚ STITCHING OVERLAY ANIMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#stitchOverlay {
  position: fixed; inset: 0; z-index: 1000;
  background: rgba(242,237,224,0.97);
  display: none; /* shown via JS */
  flex-direction: column; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
}
#stitchOverlay.active { display: flex; }

/* Fabric weave on overlay */
#stitchOverlay::before {
  content: '';
  position: absolute; inset: 0;
  background-image:
    repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(61,31,13,0.03) 2px, rgba(61,31,13,0.03) 4px),
    repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(61,31,13,0.03) 2px, rgba(61,31,13,0.03) 4px);
  pointer-events: none;
}

/* Outer stitch frame */
#stitchOverlay::after {
  content: '';
  position: absolute; inset: 24px;
  border: 3px dashed rgba(61,31,13,0.12);
  pointer-events: none;
}

.overlay-content {
  position: relative; z-index: 2;
  display: flex; flex-direction: column; align-items: center;
  gap: 0;
}

/* Stage label */
.stitch-stage-label {
  font-family: 'Rye', serif; font-size: 12px;
  letter-spacing: 3px; color: var(--brown-mid);
  opacity: 0.5; text-transform: uppercase;
  margin-bottom: 24px;
  min-height: 20px; text-align: center;
  transition: opacity .4s;
}

/* Canvas stage */
.bag-canvas-wrap {
  position: relative;
  width: 320px; height: 380px;
  margin-bottom: 32px;
}

/* SVG bag drawn progressively */
#bagCanvas {
  width: 100%; height: 100%;
}

/* Needle cursor on overlay */
.stitch-needle {
  position: absolute;
  width: 6px; height: 32px;
  background: linear-gradient(to bottom, var(--gold), var(--brown-mid));
  border-radius: 3px 3px 50% 50%;
  transform-origin: top center;
  transform: rotate(30deg);
  box-shadow: 0 3px 10px rgba(61,31,13,0.4);
  transition: left .05s, top .05s;
  z-index: 10;
}
.stitch-needle::after {
  content: '';
  position: absolute; top: 4px; left: 50%;
  transform: translateX(-50%);
  width: 3px; height: 5px;
  background: var(--cream); border-radius: 50%;
}

/* Thread tail */
.thread-tail {
  position: absolute;
  width: 2px; background: var(--terracotta);
  border-radius: 1px;
  transform-origin: top center;
  opacity: 0.7;
  pointer-events: none;
}

/* Progress bar */
.stitch-progress-wrap {
  width: 320px; margin-bottom: 28px;
}
.stitch-progress-label {
  display: flex; justify-content: space-between;
  font-family: 'Lora', serif; font-size: 11px;
  font-style: italic; color: var(--brown-mid);
  margin-bottom: 8px;
}
.stitch-progress-bar {
  width: 100%; height: 8px;
  background: var(--cream-dark);
  border: 2px solid var(--brown);
  outline: 1.5px dashed rgba(61,31,13,0.2); outline-offset: 3px;
  position: relative; overflow: visible;
}
.stitch-progress-fill {
  height: 100%;
  background: repeating-linear-gradient(
    90deg,
    var(--terracotta) 0, var(--terracotta) 8px,
    transparent 8px, transparent 14px
  );
  width: 0%; transition: width .1s linear;
  position: relative;
}
.stitch-progress-fill::after {
  content: '';
  position: absolute; right: -5px; top: 50%;
  transform: translateY(-50%);
  width: 10px; height: 10px;
  background: var(--gold);
  border: 2px solid var(--brown);
  border-radius: 50%;
}

/* Thank you message */
.thank-you-msg {
  text-align: center; opacity: 0;
  transform: translateY(20px);
  transition: opacity .6s ease, transform .6s ease;
  pointer-events: none;
}
.thank-you-msg.show {
  opacity: 1; transform: translateY(0);
  pointer-events: auto;
}
.thank-you-msg h2 {
  font-family: 'Rye', serif;
  font-size: clamp(28px, 5vw, 48px);
  color: var(--brown); letter-spacing: 1.5px;
  margin-bottom: 10px;
  line-height: 1.2;
}
.thank-you-msg h2 span { color: var(--terracotta); }
.thank-you-msg p {
  font-family: 'Lora', serif; font-style: italic;
  font-size: 15px; color: var(--brown-mid);
  line-height: 1.9; max-width: 420px;
  margin: 0 auto 28px;
}
.thank-you-badge {
  display: inline-block;
  background: var(--brown);
  border: 3px solid var(--brown);
  outline: 2.5px dashed rgba(242,237,224,0.3); outline-offset: 4px;
  padding: 12px 36px;
  font-family: 'Rye', serif; font-size: 12px;
  letter-spacing: 2px; color: var(--gold);
  margin-bottom: 20px;
}
.close-overlay {
  font-family: 'Lora', serif; font-size: 12px;
  letter-spacing: 2px; text-transform: uppercase;
  color: var(--brown-mid);
  border-bottom: 1.5px dashed var(--brown-mid);
  padding-bottom: 3px; cursor: none;
  background: none; border-top: none;
  border-left: none; border-right: none;
  transition: color .2s, border-color .2s;
  margin-top: 8px; display: block;
}
.close-overlay:hover { color: var(--terracotta); border-color: var(--terracotta); }

/* Confetti dots */
.confetti-dot {
  position: absolute;
  width: 8px; height: 8px;
  border-radius: 50%;
  pointer-events: none;
  animation: confettiFall 1.2s ease-out forwards;
}
@keyframes confettiFall {
  0%   { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
  100% { transform: translateY(160px) rotate(540deg) scale(0); opacity: 0; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 600px) {
  nav { padding: 14px 20px; }
  .form-card { padding: 40px 24px; }
  .counter-patch { padding: 24px 40px; }
  body { cursor: auto; }
  .cursor-needle, .cursor-thread { display: none; }
  .bag-canvas-wrap { width: 260px; height: 310px; }
  .stitch-progress-wrap { width: 260px; }
}
</style>
</head>
<body>

<div class="cursor-needle" id="needle"></div>
<div class="cursor-thread" id="threadCursor"></div>

<!-- NAV -->
<nav>
  <a href="index.html" class="nav-logo">The Tote<br>Bag Co.</a>
  <a href="index.html" class="nav-back">â† Back to Home</a>
</nav>

<!-- MAIN -->
<main>

  <!-- COUNTER HERO -->
  <div class="counter-hero">
    <div class="counter-eyebrow">Live Count</div>

    <div class="counter-patch">
      <div class="counter-num" id="counterNum">0</div>
      <div class="counter-sub">dreamers already in</div>
    </div>

    <h1>The Bag is<br>Being Stitched.</h1>
    <p>Every name on this list gets first access, early pricing, and a little thank-you from Aishwarya herself.</p>
  </div>

  <div class="stitch-divider"></div>

  <!-- FORM -->
  <div class="form-wrap">
    <div class="form-card">
      <div class="form-card-badge">Claim Your Spot</div>

      <div class="form-title">Reserve Your Tote.</div>
      <div class="form-subtitle">Fill this in and we'll stitch your name into our very first batch. Promise.</div>

      <form class="form-fields" id="waitlistForm" onsubmit="handleSubmit(event)" novalidate>

        <div class="field-group">
          <label for="wName">Your Name</label>
          <input type="text" id="wName" placeholder="What should Aishwarya call you?" required autocomplete="name">
        </div>

        <div class="field-group">
          <label for="wEmail">Email Address</label>
          <input type="email" id="wEmail" placeholder="your@email.com" required autocomplete="email">
          <span class="field-hint">No spam. Only bag drops. Pinky promise.</span>
        </div>

        <div class="field-group">
          <label for="wPhone">WhatsApp Number <span style="font-family:'Lora',serif;font-size:10px;font-style:italic;font-weight:normal;letter-spacing:0;text-transform:none;">(optional)</span></label>
          <input type="tel" id="wPhone" placeholder="+91 98765 43210" autocomplete="tel">
          <span class="field-hint">We'll message you on WhatsApp when your bag is ready.</span>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">
          <span class="btn-needle">ğŸª¡</span>
          <span id="btnText">Stitch Me In</span>
        </button>

      </form>

      <div class="spots-ticker" id="spotsTicker">
        Only <strong id="spotsLeft">47</strong> spots left in the first batch
      </div>
    </div>
  </div>

  <!-- PERKS -->
  <div class="perks-strip">
    <div class="perk">
      <span class="perk-icon">ğŸ·ï¸</span>
      <div class="perk-text">Early bird pricing â€” only for waitlist members</div>
    </div>
    <div class="perk">
      <span class="perk-icon">âœ‰ï¸</span>
      <div class="perk-text">Personal note from Aishwarya with your first order</div>
    </div>
    <div class="perk">
      <span class="perk-icon">ğŸ¨</span>
      <div class="perk-text">Vote on the next design before anyone else sees it</div>
    </div>
    <div class="perk">
      <span class="perk-icon">ğŸ“¦</span>
      <div class="perk-text">First batch ships â€” you get it before the world does</div>
    </div>
  </div>

</main>

<!-- â•â• STITCH ANIMATION OVERLAY â•â• -->
<div id="stitchOverlay">
  <div class="overlay-content">

    <div class="stitch-stage-label" id="stageLabel">Preparing the canvas...</div>

    <div class="bag-canvas-wrap" id="bagCanvasWrap">
      <svg id="bagCanvas" viewBox="0 0 320 380" fill="none" xmlns="http://www.w3.org/2000/svg">

        <!-- All paths drawn via stroke-dashoffset animation -->

        <!-- Handle Left -->
        <path id="p-handle-l"
          d="M92 108 Q92 52 124 52 Q156 52 156 108"
          stroke="#3D1F0D" stroke-width="8"
          stroke-linecap="round" stroke-dasharray="5 4"
          fill="none"
          stroke-dashoffset="999" />

        <!-- Handle Right -->
        <path id="p-handle-r"
          d="M164 108 Q164 62 196 62 Q228 62 228 108"
          stroke="#3D1F0D" stroke-width="8"
          stroke-linecap="round" stroke-dasharray="5 4"
          fill="none"
          stroke-dashoffset="999" />

        <!-- Bag body outline -->
        <rect id="p-body"
          x="48" y="108" width="224" height="232" rx="8"
          stroke="#3D1F0D" stroke-width="3"
          fill="#F2EDE0"
          stroke-dasharray="999" stroke-dashoffset="999" />

        <!-- Inner stitch frame -->
        <rect id="p-inner"
          x="60" y="120" width="200" height="208" rx="5"
          stroke="#3D1F0D" stroke-width="1.5"
          stroke-dasharray="6 5"
          fill="none"
          stroke-dashoffset="999" />

        <!-- Embroidery circle -->
        <circle id="p-circle"
          cx="160" cy="222" r="64"
          stroke="#C9973A" stroke-width="2"
          stroke-dasharray="5 4"
          fill="none"
          stroke-dashoffset="999" />

        <!-- Text lines (revealed as fills) -->
        <text id="p-text1"
          x="160" y="212"
          font-family="Georgia" font-size="18" font-weight="700"
          fill="#3D1F0D" text-anchor="middle" letter-spacing="1"
          opacity="0">THE TOTE</text>

        <text id="p-text2"
          x="160" y="234"
          font-family="Georgia" font-size="18" font-weight="700"
          fill="#3D1F0D" text-anchor="middle" letter-spacing="1"
          opacity="0">BAG COMPANY</text>

        <text id="p-text3"
          x="160" y="260"
          font-family="Georgia" font-size="12"
          fill="#C46A3C" text-anchor="middle"
          opacity="0">âœ¦ EST. 2025 âœ¦</text>

        <!-- Bottom fold stitch -->
        <line id="p-fold"
          x1="48" y1="296" x2="272" y2="296"
          stroke="#3D1F0D" stroke-width="1.5"
          stroke-dasharray="6 5" opacity="0.3"
          stroke-dashoffset="999" />

      </svg>

      <!-- Moving needle on overlay -->
      <div class="stitch-needle" id="overlayNeedle" style="left:92px;top:108px;"></div>
    </div>

    <!-- Progress bar -->
    <div class="stitch-progress-wrap">
      <div class="stitch-progress-label">
        <span>Stitching your bag...</span>
        <span id="progressPct">0%</span>
      </div>
      <div class="stitch-progress-bar">
        <div class="stitch-progress-fill" id="progressFill"></div>
      </div>
    </div>

    <!-- Thank you (hidden until done) -->
    <div class="thank-you-msg" id="thankYouMsg">
      <h2>You're <span>stitched in</span>,<br><span id="thankName">friend</span>! ğŸ§µ</h2>
      <p>Your spot is saved. Aishwarya will personally reach out when your bag is ready. Thank you for believing in this little dream.</p>
      <div class="thank-you-badge">âœ¦ WAITLIST MEMBER âœ¦</div>
      <br>
      <button class="close-overlay" onclick="closeOverlay()">â† Back to the site</button>
    </div>

  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CURSOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const needle = document.getElementById('needle');
const threadCur = document.getElementById('threadCursor');
let mx=0,my=0,tx=0,ty=0;
document.addEventListener('mousemove', e => {
  mx=e.clientX; my=e.clientY;
  needle.style.transform=`translate(${mx-2}px,${my}px) rotate(30deg)`;
});
(function loop(){ tx+=(mx-tx)*0.1; ty+=(my-ty)*0.1; threadCur.style.transform=`translate(${tx-14}px,${ty-14}px)`; requestAnimationFrame(loop); })();
document.querySelectorAll('a,button,input').forEach(el=>{
  el.addEventListener('mouseenter',()=>{ threadCur.style.width='50px'; threadCur.style.height='50px'; threadCur.style.borderColor='var(--gold)'; threadCur.style.opacity='0.8'; });
  el.addEventListener('mouseleave',()=>{ threadCur.style.width='28px'; threadCur.style.height='28px'; threadCur.style.borderColor='var(--terracotta)'; threadCur.style.opacity='0.55'; });
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIVE COUNTER â€” stored in localStorage so it
   persists + feels real. Replace with Supabase
   in production.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const COUNTER_KEY = 'ttbc_waitlist_count';
const BASE_COUNT  = 23; // seed number so it doesn't start at 0

function getCount() {
  return parseInt(localStorage.getItem(COUNTER_KEY) || BASE_COUNT);
}
function setCount(n) {
  localStorage.setItem(COUNTER_KEY, n);
}

// Animate counter on load
function animateCountTo(target) {
  const el = document.getElementById('counterNum');
  const start = 0;
  const dur = 1800;
  const startTime = performance.now();
  function step(now) {
    const p = Math.min((now - startTime) / dur, 1);
    const ease = 1 - Math.pow(1-p, 3);
    el.textContent = Math.floor(ease * target);
    if (p < 1) requestAnimationFrame(step);
    else el.textContent = target;
  }
  requestAnimationFrame(step);
}

// Update spots left
function updateSpots(count) {
  const spots = Math.max(0, 100 - count);
  document.getElementById('spotsLeft').textContent = spots;
}

window.addEventListener('load', () => {
  const c = getCount();
  animateCountTo(c);
  updateSpots(c);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORM SUBMIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function handleSubmit(e) {
  e.preventDefault();

  const name  = document.getElementById('wName').value.trim();
  const email = document.getElementById('wEmail').value.trim();
  const phone = document.getElementById('wPhone').value.trim();

  if (!name || !email) {
    // Shake effect on empty fields
    if(!name)  shakefield('wName');
    if(!email) shakefield('wEmail');
    return;
  }

  // Disable form
  document.getElementById('submitBtn').disabled = true;
  document.getElementById('btnText').textContent = 'Stitching...';

  // Bump counter
  const newCount = getCount() + 1;
  setCount(newCount);

  // Show overlay
  launchStitchAnimation(name, newCount);
}

function shakefield(id) {
  const el = document.getElementById(id);
  el.style.animation = 'none';
  el.offsetHeight; // reflow
  el.style.animation = 'shake 0.4s ease';
  el.style.borderColor = 'var(--terracotta)';
  setTimeout(()=>{ el.style.borderColor='var(--brown)'; el.style.animation=''; }, 800);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STITCH ANIMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const stages = [
  { label: 'Cutting the canvas...', pct: 8,  duration: 700 },
  { label: 'Stitching the handles...', pct: 22, duration: 1100 },
  { label: 'Sewing the body...', pct: 42, duration: 1200 },
  { label: 'Adding the inner frame...', pct: 58, duration: 900 },
  { label: 'Embroidering the circle...', pct: 72, duration: 1000 },
  { label: 'Stitching the logo...', pct: 85, duration: 900 },
  { label: 'Adding finishing touches...', pct: 94, duration: 700 },
  { label: 'Your bag is ready! ğŸ‰', pct: 100, duration: 500 },
];

function launchStitchAnimation(name, newCount) {
  const overlay = document.getElementById('stitchOverlay');
  overlay.classList.add('active');

  // Reset SVG paths
  resetPaths();

  // Set name in thank you
  document.getElementById('thankName').textContent = name.split(' ')[0];

  // Reset progress
  setProgress(0);
  document.getElementById('stageLabel').textContent = 'Preparing the canvas...';

  // Run stages
  let delay = 300;
  stages.forEach((stage, i) => {
    setTimeout(() => {
      document.getElementById('stageLabel').textContent = stage.label;
      setProgress(stage.pct);
      animateStageElements(i);
    }, delay);
    delay += stage.duration;
  });

  // Show thank you after all stages
  setTimeout(() => {
    showThankYou(newCount);
  }, delay + 200);
}

function resetPaths() {
  const paths = ['p-handle-l','p-handle-r','p-body','p-inner','p-circle','p-fold'];
  paths.forEach(id => {
    const el = document.getElementById(id);
    if(el) { el.style.strokeDashoffset = '999'; el.style.transition = 'none'; }
  });
  ['p-text1','p-text2','p-text3'].forEach(id => {
    const el = document.getElementById(id);
    if(el) el.setAttribute('opacity','0');
  });
  document.getElementById('thankYouMsg').classList.remove('show');
  document.getElementById('progressFill').style.width = '0%';
}

function animateStageElements(stageIndex) {
  const overlayNeedle = document.getElementById('overlayNeedle');

  const actions = [
    // Stage 0: canvas prep â€” nothing drawn yet
    () => {},
    // Stage 1: handles
    () => {
      animatePath('p-handle-l', 220, 1000);
      animatePath('p-handle-r', 220, 1000);
      moveNeedle(overlayNeedle, 92, 108);
    },
    // Stage 2: body
    () => {
      animatePath('p-body', 850, 1100);
      moveNeedle(overlayNeedle, 48, 108);
    },
    // Stage 3: inner frame
    () => {
      animatePath('p-inner', 850, 800);
      moveNeedle(overlayNeedle, 60, 120);
    },
    // Stage 4: circle
    () => {
      animatePath('p-circle', 430, 900);
      moveNeedle(overlayNeedle, 224, 222);
    },
    // Stage 5: text
    () => {
      revealText('p-text1', 400);
      revealText('p-text2', 700);
      revealText('p-text3', 1000);
      moveNeedle(overlayNeedle, 160, 210);
    },
    // Stage 6: fold line
    () => {
      animatePath('p-fold', 230, 600);
      moveNeedle(overlayNeedle, 160, 296);
    },
    // Stage 7: done
    () => { moveNeedle(overlayNeedle, 160, 350); }
  ];

  if (actions[stageIndex]) actions[stageIndex]();
}

function animatePath(id, length, duration) {
  const el = document.getElementById(id);
  if (!el) return;
  el.style.transition = 'none';
  el.style.strokeDasharray = length;
  el.style.strokeDashoffset = length;
  el.offsetHeight; // reflow
  el.style.transition = `stroke-dashoffset ${duration}ms cubic-bezier(0.4,0,0.2,1)`;
  el.style.strokeDashoffset = '0';
}

function revealText(id, delay) {
  setTimeout(() => {
    const el = document.getElementById(id);
    if (!el) return;
    el.style.transition = 'opacity 0.5s ease';
    el.setAttribute('opacity','1');
  }, delay);
}

function moveNeedle(el, x, y) {
  el.style.transition = 'left 0.6s cubic-bezier(0.23,1,0.32,1), top 0.6s cubic-bezier(0.23,1,0.32,1)';
  el.style.left = (x - 3) + 'px';
  el.style.top  = (y - 6) + 'px';
}

function setProgress(pct) {
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressPct').textContent = pct + '%';
}

function showThankYou(newCount) {
  // Hide stage elements, show thank you
  document.getElementById('stageLabel').style.opacity = '0';
  document.getElementById('overlayNeedle').style.opacity = '0';

  // Update counter on page
  const counterEl = document.getElementById('counterNum');
  counterEl.textContent = newCount;
  counterEl.classList.add('bump');
  setTimeout(()=>counterEl.classList.remove('bump'), 500);
  updateSpots(newCount);

  // Show message
  setTimeout(() => {
    document.getElementById('thankYouMsg').classList.add('show');
    spawnConfetti();
  }, 300);
}

function closeOverlay() {
  const overlay = document.getElementById('stitchOverlay');
  overlay.classList.remove('active');
  // Reset button
  document.getElementById('submitBtn').disabled = false;
  document.getElementById('btnText').textContent = 'Stitch Me In';
  document.getElementById('stageLabel').style.opacity = '1';
  document.getElementById('overlayNeedle').style.opacity = '1';
  // Clear form
  document.getElementById('waitlistForm').reset();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function spawnConfetti() {
  const overlay = document.getElementById('stitchOverlay');
  const colors = ['var(--gold)','var(--terracotta)','var(--teal)','var(--olive)','var(--brown-mid)'];
  for(let i=0; i<28; i++) {
    setTimeout(()=>{
      const dot = document.createElement('div');
      dot.className = 'confetti-dot';
      dot.style.left = (20 + Math.random()*60) + '%';
      dot.style.top  = (10 + Math.random()*30) + '%';
      dot.style.background = colors[Math.floor(Math.random()*colors.length)];
      dot.style.animationDelay = (Math.random()*0.3)+'s';
      dot.style.width = dot.style.height = (6+Math.random()*10)+'px';
      overlay.appendChild(dot);
      setTimeout(()=>dot.remove(), 1600);
    }, i*40);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHAKE KEYFRAME (injected)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const style = document.createElement('style');
style.textContent = `
  @keyframes shake {
    0%,100%{transform:translateX(0)}
    20%{transform:translateX(-6px)}
    40%{transform:translateX(6px)}
    60%{transform:translateX(-4px)}
    80%{transform:translateX(4px)}
  }
`;
document.head.appendChild(style);
</script>
</body>
</html>
